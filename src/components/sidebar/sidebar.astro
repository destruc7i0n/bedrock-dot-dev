---
import SidebarContainer from './sidebar-container';
import Selectors from './sidebar-selectors';
import SidebarFilter from './sidebar-filter';
import SidebarContent from './sidebar-content';
import ModeSelect from '@components/theme/mode-select';
import type { SidebarStructure } from './index';
import type { BedrockVersions } from '../../lib/versions';
import type { TagsResponse } from '../../lib/tags';

interface Props {
  sidebar: SidebarStructure;
  file: string;
  major: string;
  minor: string;
  versions: BedrockVersions;
  tags: TagsResponse;
}

const { sidebar, file, major, minor, versions, tags } = Astro.props;
---

<aside class="sidebar-wrapper">
  <SidebarContainer client:load>
    <div class="w-full p-4 border-b border-gray-200 dark:border-dark-gray-800">
      <Selectors
        transition:persist="selectors"
        client:load
        major={major}
        minor={minor}
        file={file}
        versions={versions}
        tags={tags}
      />
      <SidebarFilter client:load />
    </div>
    <SidebarContent
      client:load
      sidebar={sidebar}
      file={file}
    />
    <div class="flex flex-row justify-end items-center bg-white dark:bg-dark-gray-950 w-full px-4 py-2 border-t border-gray-200 dark:border-dark-gray-800 bottom-safe-area-inset inset-2">
      <ModeSelect
        transition:persist="mode-select"
        client:load
        className="ml-2"
      />
    </div>
  </SidebarContainer>
</aside>

