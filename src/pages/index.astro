---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/homepage/navbar.astro';
import Footer from '../components/footer.astro';
import VersionChooser from '../components/version-chooser/version-chooser';
import DocSearch from '../components/docsearch/docsearch.astro';

import { getTags } from '../lib/tags';
import { allFilesList } from '../lib/versions';
import { Locale, t } from '../lib/i18n';
import { algolia } from '../lib/algolia';

const versions = await allFilesList(Locale.English);
const tags = await getTags(Locale.English);
---

<Layout 
  title="bedrock.dev"
  description={t('page.home.website_description')}
>
  <link
    slot="head"
    rel="preconnect"
    href={`https://${algolia.appId}-dsn.algolia.net`}
    crossorigin
  />
  
  <div class="bg-gray-50 dark:bg-dark-gray-950 border-b border-gray-200 dark:border-dark-gray-800">
    <Navbar />

    <div class="max-w-screen-sm mx-auto px-4 sm:px-6 md:px-8 py-10 flex flex-wrap text-center">
      <h1 class="font-extrabold text-4xl md:text-5xl leading-10 text-gray-900 dark:text-white w-full">
        bedrock.dev
      </h1>
      <h2 class="mt-4 mb-6 sm:mt-5 font-medium text-xl md:text-2xl text-center leading-tight text-gray-900 dark:text-gray-200 w-full">
        {t('page.home.subtitle')}
      </h2>

      <DocSearch
        placeHolder={t('page.home.search_placeholder')}
        fullWidth={true}
        locale={Locale.English}
      />
    </div>
  </div>

  <div class="max-w-screen-sm mx-auto px-4 sm:px-6 md:px-8 mt-10">
    <div class="w-full bg-white dark:bg-dark-gray-950 text-black dark:text-gray-200 rounded-lg outline-none appearance-none transition duration-150 ease-in-out">
      <div class="flex flex-wrap xl:items-center text-xl font-normal p-3">
        <h2 class="w-full pb-3 text-xl font-bold">
          {t('component.version_chooser.title')}
        </h2>
        
        <VersionChooser client:load versions={versions} tags={tags} />
      </div>
    </div>
    
    <div class="mt-6">
      <Footer outline={false} />
    </div>
  </div>
</Layout>
